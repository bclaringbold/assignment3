<% include ../partials/header.ejs %>

<main class="container">
    <h1>Contacts</h1>
    <div class="panel panel-default">
        <div class="panel-heading">
            <a href="/contacts/add" title="Add Contact"><i class="fa fa-plus-circle"></i> Add a new Contact</a>
        </div> <!-- panel-heading -->
        <% if (contacts.length > 0) { %>
        <div class="panel-body table-responsive">
            <table class="table table-bordered table-striped table-hover">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Telephone Number</th>
                        <th>Date Created</th>
                        <th>Date Updated</th>
                        <th></th>
                    </tr>
                </thead>
                </tbody>
                <% for (var i = 0; i < contacts.length; i++) { %>
                <tr>
                    <td>
                        <%= contacts[i].displayName %>
                    </td>
                    <td>
                        <%= contacts[i].email %>
                    </td>
                    <td>
                        <%= contacts[i].contactNumber %>
                    </td>
                    <td>
                        <% var date = new Date(contacts[i].created);
                         var dateString = date.toDateString() + " " + date.toLocaleTimeString(); %>
                        <%= dateString %>
                    </td>
                    <td>
                        <% date = new Date(contacts[i].updated);
                         var dateString = date.toDateString() + " " + date.toLocaleTimeString(); %>
                        <%= dateString %>
                    </td>
                    <td>
                        <a href="/contacts/<%= contacts[i]._id %>" title="Edit" class="btn btn-primary">
                            <i class="fa fa-pencil-square-o"></i>
                        </a>
                        <a href="/contacts/delete/<%= contacts[i]._id %>" title="Delete" onclick="return confirm('Are you sure you want to delete this?');" class="btn btn-danger">
                            <i class="fa fa-trash-o"></i>
                        </a>
                    </td>   
                </tr>
                <% } %>
                </tbody>
            </table>
        </div> <!-- panel-body -->
        <% } %>
    </div><!-- panel panel-default -->

</main>
<% include ../partials/footer.ejs %>